https://www.youtube.com/watch?v=F7EnW8dfetU 

# DDD, Boris and Snap-E
- DDD
  - 왜 DDD/MSA인가 ?
    - common language의 역할
      - communication cost minimize
      - 작은 변화 싸이클을 유도
      - 개발자/비개발자의 도메인 영역을 일치시킬 수 있음
        - 개발자는 비개발자에 비해 도메인 전문 지식이 부족하다.
        - 비개발자는 개발자에 비해 IT 관련 지식이 부족하다.
        - 서로의 언어를 고집하기 보다는 "도메인"에 대해서 이야기할 수 있다.
          - ex) 응시자는 응시중 다른 시험을 시작할 수 있습니까 ?
  - Event Storming
    - 정의
      - IT와 Business의 align
      - MSA design에서 domain과 subDomain을 구분할 수 있다.
    - 구성 요소
      - Domain Events
        - 알림 혹은 상태 전이
        - 과거형/수동형으로 표현
      - Command
        - 요청 혹은 트리거
        - 도메인 이벤트의 발생지(source)
      - Aggregate 
        - 한 개 혹은 그 이상의 entity로 구성
        - Aggregate끼리는 루즈 커플링(오브젝트 탐색이 불가능, id로 식별)
      - Command -> Aggregate -> Domain Event 동작 (Aggregate와 Domain Event 사이에서는 원자성을 보존되어야함.)
        1. Add Item to Card
        2. Item
        3. Item Added to Cart
- Boris
  - 설계 내용(Aggregate, Domain)을 기술적 구현으로 표현
  - 동기/비동신 통신, 외부 통신 등
- Snap-E
  - Aggregate의 상세 스펙
    - API, DATA, STORY, RISK, UI 등


# 1.1 도메인 이란 ?
> 소프트웨어로 해결하고자 하는 문제 영역

# 1.2 도메인 전문가와 개발자 간 지식 공유
> 개발자도 도메인 지식을 갖추면 올바른 제품을 개발할 확률이 높아진다.

# 1.3 도메인 모델
> 도메인을 개념적으로 표현한 것

# 1.4 도메인 모델 패턴
- 애플리케이션 아키텍처 구성
  1. 사용자 인터페이스 혹은 표현 (Presentation)
     - 사용자의 요청을 처리하고 사용자에게 정보를 보여준다. 여기서 사용자는 소프트웨어를 사용하는 사람뿐만 아니라 외부 시스템일 수도 있다. 
  2. 응용 (Application)
     - 사용자가 요청한 기능을 실행한다. 업무 로직을 직접 구현하지 않으며 도메인 계층을 조합해서 기능을 실행한다. 
  3. 도메인 (Domain)
     - 시스템이 제공할 도메인 규칙을 구현한다. 
  4. 인프라스트럭쳐(Infrastructure) 
     - 데이터베이스나 메시징 시스템과 같은 외부 시스템과의 연동을 처리한다.

# 1.5 도메인 모델 도출
> 핵심 구성요소, 규칙, 기능을 찾아 도메인 모델을 구성한다.

# 2.1 네 개의 영역
1. 표현
   - 요청에 대한 응답을 반환하는 역할
     - 웹 브라우저를 사용하는 사람, REST API를 호출하는 시스템 등
2. 응용
   - 도메인 로직의 위임자 
3. 도메인
   - 도메인 핵심 로직 구현 
4. 인프라스트럭처 
   - 논리적 개념이 아닌 기술적 구현
     - RDBMS, SMTP, 외부 HTTP 서비스 호출 등 
# 2.2 계층 구조 아키텍처
> 표현 > 응용 > 도메인 > 인프라스트럭처
- 상위 계층에서 하위 계층으로의 의존만 존재하고 하위 계층은 상위 계층을 의존하지 않는다.
- 엄격한 계층 구조는 바로 아래의 계층에 대한 의존만 가지지만, 때로는 편리함을 위해 손자 계층에 의존하기도 한다.

# 2.3 DIP
> Dependency Inversion Principle(의존 역전 원칙)
- 인터페이스를 통해 계층적 의존을 거스를 수 있다.
  - 저수준 모듈이 고수준 모듈에 의존함.
  - driver(상향 테스트) & stub(하향 테스트)
  - 고수준 모듈에서 사용할 저수준 모듈의 의존 주입을 전달 받을 수 있다.
  - 저수준 모듈이 준비 되지 않아도 고수준 모듈에 대한 검증 테스트를 진행할 수 있다.
  - **하위 기능을 추상화한 인터페이스는 고수준 모듈 관점에서 도출해야한다.**
  - DIP가 적용된 아키텍처에서는 인프라스트럭처 영역이 도메인/응용 영역에 의존(상속)하는 구조가 된다.
    - DBMS(Mybatis, JPA 등), SMS(문자/메일)과 같은 인프라스트럭처 구현체를 갈아끼우는 방식으로 구현 기술을 변경할 수 있다.
# 2.4 도메인 영역의 주요 구성요소
  - ENTITY
    - 고유 식별자를 갖는 객체로 자신의 라이프 사이클을 갖는다. 
  - VALUE
    - 고유 식별자를 갖지 않는 객체로 개념적인 값을 표현할 때 사용된다. 
  - AGGREGATE
    - 연관된 엔티티와 밸류 객체를 개념적으로 묶은 것이다. 
  - REPOSITORY 
    - 도메인 모델의 영속성을 처리한다. 
  - DOMAIN SERVICE 
    - 특정 엔티티에 속하지 않는 도메인 로직을 제공한다. (여러 엔티티와 밸류를 필요로 하는 도메인 로직)

### 도메인 모델의 엔티티와 DB 관계형 모델의 엔티티의 차이점
> 도메인 모델의 엔티티는 데이터와 도메인 기능을 함께 제공하는 객체이다.
> 도메인 모델의 엔티티는 개념적인 표현을 밸류 타입으로 묶어서 표현할 수 있다.

### 애그리거트
> 연관 엔티티 객체의 군집
> 루트 엔티티를 통해 간접적으로 내부의 다른 엔티티나 밸류 객체에 접근한다. (애그리거트 내부 구현을 숨겨서 캡슐화할 수 있다.)
 
### 리포지터리
> 애그리거트 단위로 저장하고 조회한다.

# 2.5 요청 처리 흐름
> 표현 > 응용 서비스 > 도메인 

# 2.6 인프라스트럭처 개요
> DIP를 강요할 필요는 없다. 무조건적인 인프라스트럭처 의존을 없애기보다는 편리함이 큰 부분은 의존적으로 사용하는 것이 편할때도 있다.(스프링의 @Transactional)

# 2.7 모듈 구성
- 계층별 구성
  - 표현/응용/도메인/인프라스트럭처로 구분한 모듈 구조
- 도메인별 구성
  - 도메인 마다 표현/응용/도메인/인프라스터럭처를 포함하는 모듈 구조(도메인이 클 경우)
- 하위 도메인을 하위 패키지로 구성
  - 도메인별 구성에서 여러 개의 하위 도메인을 상위 도메인 영역에 포함시키는 모듈 구조 