# CQRS

## 단일 모델의 단점
- 주문 내역 조회 기능 구현시 여러 애그리거트에서 데이터를 가져와야 함 (order, product, member)
  - JPA 쿼리 관련 최적화 기능을 사용하지 못하므로 조회 성능 문제 발생 가능
- ORM은 도메인 상태 변경 기능을 구현하는데는 적합하지만 여러 애그리거트에서 데이터를 불러올때는 복잡함
  - 구현도를 낮추는 방법은 상태변경을 위한 모델과 조회를 위한 모델을 분리

## CQRS
- 도메인 모델 관점에서 상태 변경 기능은 주로 한 애그리거트의 상태를 변경, 조회 기능은 주로 2개 이상의 애그리거트 필요
- 두 기능의 범위가 일치하지 않기 때문에 단일 모델로 구현하면 복잡해짐
- 명령 모델은 JPA, 조회 모델은 mybatis도 가능(querydsl 도 가능)
- 두 모델을 다른 db로 분리한뒤 이벤트를 활용해서 동기화도 가능
- 장점
  - 명령 모델 구현할 때 도메인 자체에 집중 가능(조회 성능을 위한 코드가 없음)
  - 조회 단위로 캐시 기술 적용, 특화된 쿼리 마음대로 사용 가능
- 단점
  - 전용 모델을 따로 만드는 비용 발생
  - 더 많은 기술 필요(서로 다른 기술로 구현, 다른 저장소, 동기화 문제 등)
